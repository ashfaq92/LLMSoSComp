[
    {
        "id": "f64b900a257005c8",
        "type": "function",
        "z": "7e0f78b972841d3a",
        "name": "function 15",
        "func": "\nconst washingMachineTD = {\n    \"@context\": \"http://www.w3.org/ns/td\",\n    \"@type\": [\"Thing\"],\n    \"title\": \"WashingMachine\",\n    \"securityDefinitions\": {\n        \"no_sec\": {\n            \"scheme\": \"nosec\"\n        }\n    },\n    \"security\": \"no_sec\",\n    \"properties\": {\n        \"status\": {\n            \"title\": \"Machine Status\",\n            \"description\": \"Current state of the washing machine\",\n            \"type\": \"string\",\n            \"enum\": [\"idle\", \"running\", \"finished\"],\n            \"readOnly\": true,\n            \"forms\": [\n                {\n                    \"href\": \"http://localhost:8080/things/wm/status\",\n                    \"contentType\": \"application/json\",\n                    \"op\": [\"readproperty\"]\n                }\n            ]\n        },\n        \"remainingTime\": {\n            \"title\": \"Time Left\",\n            \"description\": \"Remaining wash cycle time in minutes\",\n            \"type\": \"integer\",\n            \"unit\": \"minutes\",\n            \"readOnly\": true,\n            \"forms\": [\n                {\n                    \"href\": \"http://localhost:8080/things/wm/remainingTime\",\n                    \"contentType\": \"application/json\",\n                    \"op\": [\"readproperty\"]\n                }\n            ]\n        }\n    },\n    \"actions\": {\n        \"start\": {\n            \"title\": \"Start Washing Cycle\",\n            \"description\": \"Start a new wash program\",\n            \"input\": {\n                \"type\": \"string\",\n                \"enum\": [\"quick\", \"cotton\", \"wool\"]\n            },\n            \"forms\": [\n                {\n                    \"href\": \"http://localhost:8080/things/wm/start\",\n                    \"contentType\": \"application/json\",\n                    \"op\": [\"invokeaction\"]\n                }\n            ]\n        },\n        \"stop\": {\n            \"title\": \"Stop Cycle\",\n            \"description\": \"Immediately stop the wash program\",\n            \"forms\": [\n                {\n                    \"href\": \"http://localhost:8080/things/wm/stop\",\n                    \"contentType\": \"application/json\",\n                    \"op\": [\"invokeaction\"]\n                }\n            ]\n        }\n    },\n    \"events\": {\n        \"finishedCycle\": {\n            \"title\": \"Wash cycle complete\",\n            \"description\": \"Sends a notification at the end of a wash cycle\",\n            \"data\": {\n                \"type\": \"string\"\n            },\n            \"forms\": [\n                {\n                    \"href\": \"ws://localhost:8080/things/wm/finishedCycle\",\n                    \"subprotocol\": \"websocket\",\n                    \"contentType\": \"application/json\",\n                    \"op\": [\"subscribeevent\"]\n                },\n                {\n                    \"href\": \"http://localhost:8080/things/wm/finishedCycle\",\n                    \"subprotocol\": \"longpoll\"\n                }\n            ]\n        }\n    }\n}\n\n\n\nflow.set(\"washingMachineTD\", washingMachineTD);\n\nmsg.payload = washingMachineTD\n\n\nmsg.headers = {\n    \"Content-Type\": \"application/td+json\"\n};\n\nreturn msg;\n",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 390,
        "y": 420,
        "wires": [
            [
                "980a988016981af5"
            ]
        ]
    },
    {
        "id": "0db8ee0958e1ef02",
        "type": "http in",
        "z": "7e0f78b972841d3a",
        "name": "",
        "url": "/washingmachine",
        "method": "get",
        "upload": false,
        "skipBodyParsing": false,
        "swaggerDoc": "",
        "x": 120,
        "y": 420,
        "wires": [
            [
                "f64b900a257005c8"
            ]
        ]
    },
    {
        "id": "0c1d3eb21c52f30b",
        "type": "comment",
        "z": "7e0f78b972841d3a",
        "name": "Washing Machine",
        "info": "",
        "x": 350,
        "y": 380,
        "wires": []
    },
    {
        "id": "1c85c21946fc3c7e",
        "type": "function",
        "z": "7e0f78b972841d3a",
        "name": "function 16",
        "func": "\n\nmsg.payload = \"test\"\n\n\n\nreturn msg;\n",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 330,
        "y": 280,
        "wires": [
            [
                "05a8bf26fa44989b",
                "c1376a597a4c11f1"
            ]
        ]
    },
    {
        "id": "05a8bf26fa44989b",
        "type": "debug",
        "z": "7e0f78b972841d3a",
        "name": "debug 17",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 560,
        "y": 280,
        "wires": []
    },
    {
        "id": "4ca82008fa95bfb8",
        "type": "http in",
        "z": "7e0f78b972841d3a",
        "name": "",
        "url": "/things/test",
        "method": "get",
        "upload": false,
        "skipBodyParsing": false,
        "swaggerDoc": "",
        "x": 100,
        "y": 280,
        "wires": [
            [
                "1c85c21946fc3c7e"
            ]
        ]
    },
    {
        "id": "c1376a597a4c11f1",
        "type": "http response",
        "z": "7e0f78b972841d3a",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 550,
        "y": 320,
        "wires": []
    },
    {
        "id": "f79ce0f087c8a386",
        "type": "comment",
        "z": "7e0f78b972841d3a",
        "name": "test",
        "info": "",
        "x": 310,
        "y": 240,
        "wires": []
    },
    {
        "id": "1b2b88797d05b5cc",
        "type": "http in",
        "z": "7e0f78b972841d3a",
        "name": "",
        "url": "/washingmachine",
        "method": "get",
        "upload": false,
        "skipBodyParsing": false,
        "swaggerDoc": "",
        "x": 120,
        "y": 460,
        "wires": [
            [
                "c7c33a5af005f2f8"
            ]
        ]
    },
    {
        "id": "c7c33a5af005f2f8",
        "type": "function",
        "z": "7e0f78b972841d3a",
        "name": "function 17",
        "func": "msg.payload = { status: flow.get(\"wm_status\") || \"idle\" };\n\nmsg.headers = {\"Content-Type\": \"application/json\"};\n\nreturn msg;\n",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 390,
        "y": 460,
        "wires": [
            [
                "980a988016981af5"
            ]
        ]
    },
    {
        "id": "ec15c7294110d82a",
        "type": "http in",
        "z": "7e0f78b972841d3a",
        "name": "",
        "url": "/washingmachine/remainingTime",
        "method": "get",
        "upload": false,
        "skipBodyParsing": false,
        "swaggerDoc": "",
        "x": 170,
        "y": 500,
        "wires": [
            [
                "466337878f69cc40"
            ]
        ]
    },
    {
        "id": "466337878f69cc40",
        "type": "function",
        "z": "7e0f78b972841d3a",
        "name": "function 18",
        "func": "msg.headers = {\"Content-Type\": \"application/json\"};\n\nmsg.payload = { remainingTime: flow.get(\"wm_time\") || 0 };\nreturn msg;\n\n\n\n",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 390,
        "y": 500,
        "wires": [
            [
                "980a988016981af5"
            ]
        ]
    },
    {
        "id": "980a988016981af5",
        "type": "http response",
        "z": "7e0f78b972841d3a",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 590,
        "y": 500,
        "wires": []
    },
    {
        "id": "1047a1d416b06ec0",
        "type": "http in",
        "z": "7e0f78b972841d3a",
        "name": "",
        "url": "/washingmachine/start",
        "method": "post",
        "upload": false,
        "skipBodyParsing": false,
        "swaggerDoc": "",
        "x": 140,
        "y": 540,
        "wires": [
            [
                "bab3d529a04c8321"
            ]
        ]
    },
    {
        "id": "bab3d529a04c8321",
        "type": "function",
        "z": "7e0f78b972841d3a",
        "name": "function 19",
        "func": "msg.headers = {\"Content-Type\": \"application/json\"};\n\nlet program = msg.payload.program || \"quick\";\nflow.set(\"wm_status\", \"running\");\nflow.set(\"wm_time\", 30);   // default minutes for cycle\nmsg.payload = { message: \"Started program: \" + program };\nreturn msg;\n\n",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 390,
        "y": 540,
        "wires": [
            [
                "980a988016981af5"
            ]
        ]
    },
    {
        "id": "3bdb1f6328e8abd1",
        "type": "http in",
        "z": "7e0f78b972841d3a",
        "name": "",
        "url": "/washingmachine/stop",
        "method": "post",
        "upload": false,
        "skipBodyParsing": false,
        "swaggerDoc": "",
        "x": 140,
        "y": 580,
        "wires": [
            [
                "7a59bddf7efa02c7"
            ]
        ]
    },
    {
        "id": "7a59bddf7efa02c7",
        "type": "function",
        "z": "7e0f78b972841d3a",
        "name": "function 20",
        "func": "msg.headers = {\"Content-Type\": \"application/json\"};\n\nflow.set(\"wm_status\", \"idle\");\nflow.set(\"wm_time\", 0);\nmsg.payload = { message: \"Cycle stopped\" };\nreturn msg;\n\n\n",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 390,
        "y": 580,
        "wires": [
            [
                "980a988016981af5"
            ]
        ]
    },
    {
        "id": "bafc632bd18a7754",
        "type": "inject",
        "z": "7e0f78b972841d3a",
        "name": "cyclefinished",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "1",
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 110,
        "y": 660,
        "wires": [
            [
                "f9b4498b4c077e78"
            ]
        ]
    },
    {
        "id": "f9b4498b4c077e78",
        "type": "function",
        "z": "7e0f78b972841d3a",
        "name": "function 21",
        "func": "let status = flow.get(\"wm_status\") || \"idle\";\nlet time = flow.get(\"wm_time\") || 0;\n\nif (status === \"running\") {\n    if (time > 0) {\n        flow.set(\"wm_time\", time - 1);\n    } else {\n        flow.set(\"wm_status\", \"finished\");\n        msg.payload = \"Cycle finished!\";\n        return msg;  // this triggers the event\n    }\n}\nreturn null;\n",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 390,
        "y": 660,
        "wires": [
            [
                "cf86740517719117",
                "b7614e84e21bc41c"
            ]
        ]
    },
    {
        "id": "cf86740517719117",
        "type": "debug",
        "z": "7e0f78b972841d3a",
        "name": "debug 19",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 580,
        "y": 620,
        "wires": []
    },
    {
        "id": "d9158db16b493f76",
        "type": "comment",
        "z": "7e0f78b972841d3a",
        "name": "Alarm â°",
        "info": "",
        "x": 1260,
        "y": 240,
        "wires": []
    },
    {
        "id": "a88c5e8116986d94",
        "type": "function",
        "z": "7e0f78b972841d3a",
        "name": "function 22",
        "func": "\nconst alarmTD = {\n    \"@context\": [\n        \"[http://www.w3.org/ns/td](http://www.w3.org/ns/td)\"\n    ],\n    \"@type\": [\n        \"Thing\"\n    ],\n    \"title\": \"Alarm\",\n    \"securityDefinitions\": {\n        \"no_sec\": {\n            \"scheme\": \"nosec\"\n        }\n    },\n    \"security\": \"no_sec\",\n    \"properties\": {\n        \"time\": {\n            \"title\": \"Alarm Time\",\n            \"description\": \"The scheduled alarm time in HH:MM format\",\n            \"type\": \"string\",\n            \"readOnly\": false,\n            \"forms\": [\n                {\n                    \"href\": \"http://localhost:8080/alarm/time\",\n                    \"contentType\": \"application/json\",\n                    \"op\": [\"readproperty\", \"writeproperty\"]\n                }\n            ]\n        },\n        \"enabled\": {\n            \"title\": \"Enabled\",\n            \"description\": \"Whether the alarm is active\",\n            \"type\": \"boolean\",\n            \"readOnly\": false,\n            \"forms\": [\n                {\n                    \"href\": \"http://localhost:8080/alarm/enabled\",\n                    \"contentType\": \"application/json\",\n                    \"op\": [\"readproperty\", \"writeproperty\"]\n                }\n            ]\n        }\n    },\n    \"actions\": {\n        \"setTime\": {\n            \"title\": \"Set Alarm Time\",\n            \"input\": {\n                \"type\": \"string\",\n                \"pattern\": \"^([01]?[0-9]|2[0-3]):[0-5][0-9]$\"\n            },\n            \"forms\": [\n                {\n                    \"href\": \"http://localhost:8080/alarm/setTime\",\n                    \"contentType\": \"application/json\",\n                    \"op\": [\"invokeaction\"]\n                }\n            ]\n        },\n        \"toggle\": {\n            \"title\": \"Enable/Disable Alarm\",\n            \"input\": {\n                \"type\": \"boolean\"\n            },\n            \"forms\": [\n                {\n                    \"href\": \"http://localhost:8080/alarm/toggle\",\n                    \"contentType\": \"application/json\",\n                    \"op\": [\"invokeaction\"]\n                }\n            ]\n        },\n        \"stop\": {\n            \"title\": \"Stop Alarm\",\n            \"description\": \"Stops the ringing alarm\",\n            \"forms\": [\n                {\n                    \"href\": \"http://localhost:8080/alarm/stop\",\n                    \"contentType\": \"application/json\",\n                    \"op\": [\"invokeaction\"]\n                }\n            ]\n        }\n    },\n    \"events\": {\n        \"alarmRinging\": {\n            \"title\": \"Alarm Ringing\",\n            \"description\": \"This alarm has started ringing\",\n            \"data\": {\n                \"type\": \"string\"\n            },\n            \"forms\": [\n                {\n                    \"href\": \"http://localhost:8080/alarm/ringing\",\n                    \"subprotocol\": \"longpoll\"\n                }\n            ]\n        }\n    }\n}\n\n\n\n\nflow.set(\"alarmTD\", alarmTD);\n\nmsg.payload = alarmTD\n\n\nmsg.headers = {\"Content-Type\": \"application/td+json\"};\n\nreturn msg;\n",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1250,
        "y": 300,
        "wires": [
            [
                "0c6ae03bc072140c"
            ]
        ]
    },
    {
        "id": "3ee26586773f6ed6",
        "type": "http in",
        "z": "7e0f78b972841d3a",
        "name": "",
        "url": "/alarm",
        "method": "get",
        "upload": false,
        "skipBodyParsing": false,
        "swaggerDoc": "",
        "x": 960,
        "y": 300,
        "wires": [
            [
                "a88c5e8116986d94"
            ]
        ]
    },
    {
        "id": "09d90a7cda6f68bc",
        "type": "function",
        "z": "7e0f78b972841d3a",
        "name": "function 23",
        "func": "msg.headers = { \"Content-Type\": \"application/json\" };\n\nmsg.payload = { time: flow.get(\"alarm_time\") || \"07:00\" };\nreturn msg;\n",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1250,
        "y": 340,
        "wires": [
            [
                "0c6ae03bc072140c"
            ]
        ]
    },
    {
        "id": "8d8b844de244e471",
        "type": "http in",
        "z": "7e0f78b972841d3a",
        "name": "",
        "url": "/alarm/time",
        "method": "get",
        "upload": false,
        "skipBodyParsing": false,
        "swaggerDoc": "",
        "x": 980,
        "y": 340,
        "wires": [
            [
                "09d90a7cda6f68bc"
            ]
        ]
    },
    {
        "id": "e7034e583b904992",
        "type": "function",
        "z": "7e0f78b972841d3a",
        "name": "function 24",
        "func": "msg.headers = { \"Content-Type\": \"application/json\" };\n\n\nlet body = msg.payload;\nif (body && body.time) {\n    flow.set(\"alarm_time\", body.time);\n    msg.payload = { message: \"Alarm time set\", time: body.time };\n} else {\n    msg.payload = { error: \"Missing 'time' in payload\" };\n}\nreturn msg;\n",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1250,
        "y": 380,
        "wires": [
            [
                "0c6ae03bc072140c"
            ]
        ]
    },
    {
        "id": "dec2294db8a50b06",
        "type": "http in",
        "z": "7e0f78b972841d3a",
        "name": "",
        "url": "/alarm/time",
        "method": "put",
        "upload": false,
        "skipBodyParsing": false,
        "swaggerDoc": "",
        "x": 980,
        "y": 380,
        "wires": [
            [
                "e7034e583b904992"
            ]
        ]
    },
    {
        "id": "5fc2563290de565a",
        "type": "function",
        "z": "7e0f78b972841d3a",
        "name": "function 25",
        "func": "msg.headers = { \"Content-Type\": \"application/json\" };\n\n\nmsg.payload = { enabled: flow.get(\"alarm_enabled\") || false };\nreturn msg;\n",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1250,
        "y": 420,
        "wires": [
            [
                "0c6ae03bc072140c"
            ]
        ]
    },
    {
        "id": "2c5c35b270e4fcd7",
        "type": "http in",
        "z": "7e0f78b972841d3a",
        "name": "",
        "url": "/alarm/enabled",
        "method": "get",
        "upload": false,
        "skipBodyParsing": false,
        "swaggerDoc": "",
        "x": 990,
        "y": 420,
        "wires": [
            [
                "5fc2563290de565a"
            ]
        ]
    },
    {
        "id": "7bdda896bc3a199a",
        "type": "function",
        "z": "7e0f78b972841d3a",
        "name": "function 26",
        "func": "msg.headers = { \"Content-Type\": \"application/json\" };\n\nlet body = msg.payload;\nif (typeof body.enabled === \"boolean\") {\n    flow.set(\"alarm_enabled\", body.enabled);\n    msg.payload = { message: \"Alarm state updated\", enabled: body.enabled };\n} else {\n    msg.payload = { error: \"Missing or invalid 'enabled' in payload\" };\n}\nreturn msg;\n",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1250,
        "y": 460,
        "wires": [
            [
                "0c6ae03bc072140c"
            ]
        ]
    },
    {
        "id": "1558a1c9dd212174",
        "type": "http in",
        "z": "7e0f78b972841d3a",
        "name": "",
        "url": "/alarm/enabled",
        "method": "put",
        "upload": false,
        "skipBodyParsing": false,
        "swaggerDoc": "",
        "x": 990,
        "y": 460,
        "wires": [
            [
                "7bdda896bc3a199a"
            ]
        ]
    },
    {
        "id": "0c6ae03bc072140c",
        "type": "http response",
        "z": "7e0f78b972841d3a",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 1450,
        "y": 460,
        "wires": []
    },
    {
        "id": "9894c0ca898663cf",
        "type": "http in",
        "z": "7e0f78b972841d3a",
        "name": "",
        "url": "/alarm/setTime",
        "method": "post",
        "upload": false,
        "skipBodyParsing": false,
        "swaggerDoc": "",
        "x": 990,
        "y": 500,
        "wires": [
            [
                "bb7c8dc0c0046fad"
            ]
        ]
    },
    {
        "id": "bb7c8dc0c0046fad",
        "type": "function",
        "z": "7e0f78b972841d3a",
        "name": "function 27",
        "func": "msg.headers = {\"Content-Type\": \"application/json\"};\n\nlet time = msg.payload.time;\nif (time) {\n    flow.set(\"alarm_time\", time);\n    msg.payload = { message: \"Alarm time set via action\", time: time };\n} else {\n    msg.payload = { error: \"Missing 'time' in payload\" };\n}\nreturn msg;\n",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1250,
        "y": 500,
        "wires": [
            [
                "0c6ae03bc072140c"
            ]
        ]
    },
    {
        "id": "0e4613bcaa286270",
        "type": "http in",
        "z": "7e0f78b972841d3a",
        "name": "",
        "url": "/alarm/toggle",
        "method": "post",
        "upload": false,
        "skipBodyParsing": false,
        "swaggerDoc": "",
        "x": 990,
        "y": 540,
        "wires": [
            [
                "12b38ddbfce5a278"
            ]
        ]
    },
    {
        "id": "12b38ddbfce5a278",
        "type": "function",
        "z": "7e0f78b972841d3a",
        "name": "function 28",
        "func": "msg.headers = {\"Content-Type\": \"application/json\"};\n\n// Get current state, default to false\nlet enabled = flow.get(\"alarm_enabled\") || false;\n\n// Reverse the state\nenabled = !enabled;\n\n// Save back to context\nflow.set(\"alarm_enabled\", enabled);\n\n// Return message\nmsg.payload = { message: \"Alarm \" + (enabled ? \"enabled\" : \"disabled\"), enabled: enabled };\nreturn msg;\n",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1250,
        "y": 540,
        "wires": [
            [
                "0c6ae03bc072140c"
            ]
        ]
    },
    {
        "id": "e26a5e445f1f8c37",
        "type": "http in",
        "z": "7e0f78b972841d3a",
        "name": "",
        "url": "/alarm/stop",
        "method": "post",
        "upload": false,
        "skipBodyParsing": false,
        "swaggerDoc": "",
        "x": 980,
        "y": 580,
        "wires": [
            [
                "8ea75e45c1e6b679"
            ]
        ]
    },
    {
        "id": "8ea75e45c1e6b679",
        "type": "function",
        "z": "7e0f78b972841d3a",
        "name": "function 29",
        "func": "msg.headers = {\"Content-Type\": \"application/json\"};\n\nflow.set(\"alarm_ringing\", false);\nmsg.payload = { message: \"Alarm stopped\" };\nreturn msg;\n",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1250,
        "y": 580,
        "wires": [
            [
                "0c6ae03bc072140c"
            ]
        ]
    },
    {
        "id": "38c7f7332ac7bf1b",
        "type": "inject",
        "z": "7e0f78b972841d3a",
        "name": "alarmRinging",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "1",
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 1000,
        "y": 620,
        "wires": [
            [
                "24deede65dbf99b6"
            ]
        ]
    },
    {
        "id": "24deede65dbf99b6",
        "type": "function",
        "z": "7e0f78b972841d3a",
        "name": "function 30",
        "func": "let enabled = flow.get(\"alarm_enabled\") || false;\nlet alarmTime = flow.get(\"alarm_time\") || \"07:00\";\nlet ringing = flow.get(\"alarm_ringing\") || false;\n\nlet now = new Date();\nlet currentTime = now.getHours().toString().padStart(2, \"0\") + \":\" +\n    now.getMinutes().toString().padStart(2, \"0\");\n\nif (enabled && currentTime === alarmTime && !ringing) {\n    flow.set(\"alarm_ringing\", true);\n    msg.payload = \"Alarm ringing at \" + alarmTime;\n    return msg;  // emit event\n} else {\n    return null; // no event\n}\n",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1250,
        "y": 620,
        "wires": [
            [
                "2e37ea10f2d1ca2a",
                "0c6ae03bc072140c",
                "0916e7905bc65d3d"
            ]
        ]
    },
    {
        "id": "2e37ea10f2d1ca2a",
        "type": "debug",
        "z": "7e0f78b972841d3a",
        "name": "debug 18",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 1460,
        "y": 620,
        "wires": []
    },
    {
        "id": "22c9bce343b64adb",
        "type": "comment",
        "z": "7e0f78b972841d3a",
        "name": "Door Bell ðŸ””",
        "info": "",
        "x": 250,
        "y": 840,
        "wires": []
    },
    {
        "id": "304d9139fb042253",
        "type": "http in",
        "z": "7e0f78b972841d3a",
        "name": "",
        "url": "/doorbell",
        "method": "get",
        "upload": false,
        "skipBodyParsing": false,
        "swaggerDoc": "",
        "x": 90,
        "y": 880,
        "wires": [
            [
                "7e68f9973188a586"
            ]
        ]
    },
    {
        "id": "7e68f9973188a586",
        "type": "function",
        "z": "7e0f78b972841d3a",
        "name": "function 31",
        "func": "\nconst doorBellTD = {\n    \"@context\": [\n        \"http://www.w3.org/ns/td\"\n    ],\n    \"@type\": [\n        \"Thing\"\n    ],\n    \"title\": \"DoorBell\",\n    \"securityDefinitions\": {\n        \"no_sec\": {\n            \"scheme\": \"nosec\"\n        }\n    },\n    \"security\": \"no_sec\",\n    \"properties\": {\n        \"enabled\": {\n            \"title\": \"Enabled\",\n            \"description\": \"Whether the doorbell is active\",\n            \"type\": \"boolean\",\n            \"readOnly\": false,\n            \"forms\": [\n                {\n                    \"href\": \"http://localhost:8080/doorbell/enabled\",\n                    \"contentType\": \"application/json\",\n                    \"op\": [\"readproperty\", \"writeproperty\"]\n                }\n            ]\n        },\n        \"lastRung\": {\n            \"title\": \"Last Rung\",\n            \"description\": \"Timestamp of the last ring\",\n            \"type\": \"string\",\n            \"readOnly\": true,\n            \"forms\": [\n                {\n                    \"href\": \"http://localhost:8080/doorbell/lastRung\",\n                    \"contentType\": \"application/json\",\n                    \"op\": [\"readproperty\"]\n                }\n            ]\n        }\n    },\n    \"actions\": {\n        \"toggle\": {\n            \"title\": \"Enable/Disable Doorbell\",\n            \"description\": \"Invert the current enabled state\",\n            \"forms\": [\n                {\n                    \"href\": \"http://localhost:8080/doorbell/toggle\",\n                    \"contentType\": \"application/json\",\n                    \"op\": [\"invokeaction\"]\n                }\n            ]\n        },\n        \"ring\": {\n            \"title\": \"Ring Doorbell\",\n            \"description\": \"Manually trigger the bell\",\n            \"forms\": [\n                {\n                    \"href\": \"http://localhost:8080/doorbell/ring\",\n                    \"contentType\": \"application/json\",\n                    \"op\": [\"invokeaction\"]\n                }\n            ]\n        }\n    },\n    \"events\": {\n        \"bellRung\": {\n            \"title\": \"Bell rung\",\n            \"description\": \"The bell was rung\",\n            \"data\": {\n                \"type\": \"string\"\n            },\n            \"forms\": [\n                {\n                    \"href\": \"http://localhost:8080/doorbell/bellRung\",\n                    \"subprotocol\": \"longpoll\"\n                }\n            ]\n        }\n    }\n}\n\n\nflow.set(\"doorBellTD\", doorBellTD);\n\nmsg.payload = doorBellTD\n\n\nmsg.headers = {\n    \"Content-Type\": \"application/td+json\"\n};\n\nreturn msg;\n",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 370,
        "y": 880,
        "wires": [
            [
                "db1_http_response_enabled_put"
            ]
        ]
    },
    {
        "id": "db1_http_enabled_get",
        "type": "http in",
        "z": "7e0f78b972841d3a",
        "name": "",
        "url": "/doorbell/enabled",
        "method": "get",
        "upload": false,
        "skipBodyParsing": false,
        "swaggerDoc": "",
        "x": 120,
        "y": 920,
        "wires": [
            [
                "db1_func_enabled_get"
            ]
        ]
    },
    {
        "id": "db1_func_enabled_get",
        "type": "function",
        "z": "7e0f78b972841d3a",
        "name": "Return enabled",
        "func": "msg.payload = { enabled: flow.get('doorbell_enabled') || true };\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 380,
        "y": 920,
        "wires": [
            [
                "db1_http_response_enabled_put"
            ]
        ]
    },
    {
        "id": "db1_http_enabled_put",
        "type": "http in",
        "z": "7e0f78b972841d3a",
        "name": "",
        "url": "/doorbell/enabled",
        "method": "put",
        "upload": false,
        "skipBodyParsing": false,
        "swaggerDoc": "",
        "x": 120,
        "y": 960,
        "wires": [
            [
                "db1_func_enabled_put"
            ]
        ]
    },
    {
        "id": "db1_func_enabled_put",
        "type": "function",
        "z": "7e0f78b972841d3a",
        "name": "Update enabled",
        "func": "let body = msg.payload;\nif(typeof body.enabled === 'boolean'){\n    flow.set('doorbell_enabled', body.enabled);\n    msg.payload = { message: 'Doorbell ' + (body.enabled ? 'enabled' : 'disabled'), enabled: body.enabled };\n}else{\n    msg.payload = { error: 'Missing or invalid enabled' };\n}\nreturn msg;",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 380,
        "y": 960,
        "wires": [
            [
                "db1_http_response_enabled_put"
            ]
        ]
    },
    {
        "id": "db1_http_response_enabled_put",
        "type": "http response",
        "z": "7e0f78b972841d3a",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 590,
        "y": 960,
        "wires": []
    },
    {
        "id": "db1_http_lastRung_get",
        "type": "http in",
        "z": "7e0f78b972841d3a",
        "name": "",
        "url": "/doorbell/lastRung",
        "method": "get",
        "upload": false,
        "skipBodyParsing": false,
        "swaggerDoc": "",
        "x": 120,
        "y": 1000,
        "wires": [
            [
                "db1_func_lastRung_get"
            ]
        ]
    },
    {
        "id": "db1_func_lastRung_get",
        "type": "function",
        "z": "7e0f78b972841d3a",
        "name": "Return lastRung",
        "func": "msg.payload = { lastRung: flow.get('doorbell_lastRung') || null };\nreturn msg;",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 380,
        "y": 1000,
        "wires": [
            [
                "db1_http_response_enabled_put"
            ]
        ]
    },
    {
        "id": "db1_http_toggle_post",
        "type": "http in",
        "z": "7e0f78b972841d3a",
        "name": "",
        "url": "/doorbell/toggle",
        "method": "post",
        "upload": false,
        "skipBodyParsing": false,
        "swaggerDoc": "",
        "x": 120,
        "y": 1040,
        "wires": [
            [
                "db1_func_toggle"
            ]
        ]
    },
    {
        "id": "db1_func_toggle",
        "type": "function",
        "z": "7e0f78b972841d3a",
        "name": "Toggle ",
        "func": "let enabled = flow.get('doorbell_enabled');\nif (enabled === undefined) {\n    enabled = true; // default first-time state\n}\nenabled = !enabled;\nflow.set('doorbell_enabled', enabled);\nmsg.payload = { message: 'Doorbell ' + (enabled ? 'enabled' : 'disabled'), enabled: enabled };\nreturn msg;\n",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 350,
        "y": 1040,
        "wires": [
            [
                "db1_http_response_enabled_put"
            ]
        ]
    },
    {
        "id": "c11848e672c4c22f",
        "type": "http in",
        "z": "7e0f78b972841d3a",
        "name": "",
        "url": "/doorbell/ring",
        "method": "post",
        "upload": false,
        "skipBodyParsing": false,
        "swaggerDoc": "",
        "x": 110,
        "y": 1080,
        "wires": [
            [
                "6030e858ea7bc03e"
            ]
        ]
    },
    {
        "id": "6030e858ea7bc03e",
        "type": "function",
        "z": "7e0f78b972841d3a",
        "name": "Ring bell",
        "func": "if(flow.get('doorbell_enabled')){\n    let now = new Date().toISOString();\n    flow.set('doorbell_lastRung', now);\n    msg.payload = 'Doorbell rang at ' + now;\n    return msg;\n} else {\n    msg.payload = 'Doorbell is disabled';\n    return msg;\n}",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 360,
        "y": 1080,
        "wires": [
            [
                "674597642f429fbd",
                "db1_http_response_enabled_put"
            ]
        ]
    },
    {
        "id": "674597642f429fbd",
        "type": "websocket out",
        "z": "7e0f78b972841d3a",
        "name": "",
        "server": "3373b7e3eaad3463",
        "client": "",
        "x": 600,
        "y": 1060,
        "wires": []
    },
    {
        "id": "261fc1d97f1959b7",
        "type": "comment",
        "z": "7e0f78b972841d3a",
        "name": "Heater ðŸ”¥",
        "info": "",
        "x": 1140,
        "y": 720,
        "wires": []
    },
    {
        "id": "999a16fd3ea27dc6",
        "type": "http in",
        "z": "7e0f78b972841d3a",
        "name": "",
        "url": "/heater",
        "method": "get",
        "upload": false,
        "skipBodyParsing": false,
        "swaggerDoc": "",
        "x": 970,
        "y": 780,
        "wires": [
            [
                "9bbc9801e3348ec8"
            ]
        ]
    },
    {
        "id": "243260ce44651b69",
        "type": "http response",
        "z": "7e0f78b972841d3a",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 1470,
        "y": 780,
        "wires": []
    },
    {
        "id": "heater_start_http",
        "type": "http in",
        "z": "7e0f78b972841d3a",
        "name": "",
        "url": "/heater/start",
        "method": "post",
        "upload": false,
        "skipBodyParsing": false,
        "swaggerDoc": "",
        "x": 990,
        "y": 900,
        "wires": [
            [
                "heater_start_func"
            ]
        ]
    },
    {
        "id": "heater_start_func",
        "type": "function",
        "z": "7e0f78b972841d3a",
        "name": "Start heater",
        "func": "let body = msg.payload;\nif (typeof body.temperature === 'number' && typeof body.timeHeating === 'number') {\n    flow.set('heater_temperature', body.temperature);\n    flow.set('heater_timeHeating', body.timeHeating);\n    flow.set('heater_status', 'on');\n\n    // set timeout to stop heater\n    let timeout = body.timeHeating * 60000; // minutes â†’ ms\n    setTimeout(() => {\n        flow.set('heater_status', 'off');\n        flow.set('heater_timeHeating', 0);\n        let eventMsg = { payload: 'Heater stopped after timeout' };\n        node.send([null, eventMsg]);\n    }, timeout);\n\n    msg.payload = { message: 'Heater started', temperature: body.temperature, timeHeating: body.timeHeating };\n    return [msg, null];\n} else {\n    msg.payload = { error: 'Invalid input: expected {temperature:int, timeHeating:int}' };\n    return [msg, null];\n}",
        "outputs": 2,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1250,
        "y": 900,
        "wires": [
            [
                "243260ce44651b69"
            ],
            [
                "heater_ws_event"
            ]
        ]
    },
    {
        "id": "heater_stop_http",
        "type": "http in",
        "z": "7e0f78b972841d3a",
        "name": "",
        "url": "/heater/stop",
        "method": "post",
        "upload": false,
        "skipBodyParsing": false,
        "swaggerDoc": "",
        "x": 990,
        "y": 960,
        "wires": [
            [
                "heater_stop_func"
            ]
        ]
    },
    {
        "id": "heater_stop_func",
        "type": "function",
        "z": "7e0f78b972841d3a",
        "name": "Stop heater",
        "func": "flow.set('heater_status', 'off');\nflow.set('heater_timeHeating', 0);\nmsg.payload = { message: 'Heater stopped manually' };\nreturn [msg, msg];",
        "outputs": 2,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1250,
        "y": 960,
        "wires": [
            [
                "243260ce44651b69"
            ],
            [
                "heater_ws_event"
            ]
        ]
    },
    {
        "id": "heater_status_http",
        "type": "http in",
        "z": "7e0f78b972841d3a",
        "name": "",
        "url": "/heater/status",
        "method": "get",
        "upload": false,
        "skipBodyParsing": false,
        "swaggerDoc": "",
        "x": 990,
        "y": 840,
        "wires": [
            [
                "heater_status_func"
            ]
        ]
    },
    {
        "id": "heater_status_func",
        "type": "function",
        "z": "7e0f78b972841d3a",
        "name": "Return status",
        "func": "msg.payload = {\n  status: flow.get('heater_status') || 'off',\n  temperature: flow.get('heater_temperature') || 0,\n  timeHeating: flow.get('heater_timeHeating') || 0\n};\nreturn msg;",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1250,
        "y": 840,
        "wires": [
            [
                "243260ce44651b69"
            ]
        ]
    },
    {
        "id": "heater_ws_event",
        "type": "websocket out",
        "z": "7e0f78b972841d3a",
        "name": "heaterStopped event",
        "server": "heater_ws_server",
        "client": "",
        "x": 1520,
        "y": 940,
        "wires": []
    },
    {
        "id": "0b6c4efab6f01c4a",
        "type": "comment",
        "z": "7e0f78b972841d3a",
        "name": "LED ðŸ’¡",
        "info": "",
        "x": 1150,
        "y": 1040,
        "wires": []
    },
    {
        "id": "a864210a8a3b6ce4",
        "type": "http in",
        "z": "7e0f78b972841d3a",
        "name": "",
        "url": "/leds",
        "method": "get",
        "upload": false,
        "skipBodyParsing": false,
        "swaggerDoc": "",
        "x": 980,
        "y": 1100,
        "wires": [
            [
                "0308d90b5f2edb1d"
            ]
        ]
    },
    {
        "id": "275c4552aa1ace35",
        "type": "http response",
        "z": "7e0f78b972841d3a",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 1510,
        "y": 1140,
        "wires": []
    },
    {
        "id": "leds_http_status",
        "type": "http in",
        "z": "7e0f78b972841d3a",
        "name": "",
        "url": "/leds/status",
        "method": "get",
        "upload": false,
        "skipBodyParsing": false,
        "swaggerDoc": "",
        "x": 1000,
        "y": 1140,
        "wires": [
            [
                "leds_func_status"
            ]
        ]
    },
    {
        "id": "leds_func_status",
        "type": "function",
        "z": "7e0f78b972841d3a",
        "name": "Get LED status",
        "func": "msg.payload = { status: flow.get('leds_status') || 'off' };\nreturn msg;",
        "outputs": 1,
        "x": 1260,
        "y": 1140,
        "wires": [
            [
                "275c4552aa1ace35"
            ]
        ]
    },
    {
        "id": "leds_http_on",
        "type": "http in",
        "z": "7e0f78b972841d3a",
        "name": "",
        "url": "/leds/on",
        "method": "post",
        "upload": false,
        "skipBodyParsing": false,
        "swaggerDoc": "",
        "x": 990,
        "y": 1180,
        "wires": [
            [
                "leds_func_on"
            ]
        ]
    },
    {
        "id": "leds_func_on",
        "type": "function",
        "z": "7e0f78b972841d3a",
        "name": "Turn ON",
        "func": "flow.set('leds_status', 'on');\nmsg.payload = { result: 'LEDs turned on' };\nnode.send([msg, {payload:'on'}]);\nreturn;",
        "outputs": 2,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1240,
        "y": 1180,
        "wires": [
            [
                "275c4552aa1ace35"
            ],
            [
                "leds_ws_event"
            ]
        ]
    },
    {
        "id": "leds_http_off",
        "type": "http in",
        "z": "7e0f78b972841d3a",
        "name": "",
        "url": "/leds/off",
        "method": "post",
        "upload": false,
        "skipBodyParsing": false,
        "swaggerDoc": "",
        "x": 990,
        "y": 1220,
        "wires": [
            [
                "leds_func_off"
            ]
        ]
    },
    {
        "id": "leds_func_off",
        "type": "function",
        "z": "7e0f78b972841d3a",
        "name": "Turn OFF",
        "func": "flow.set('leds_status', 'off');\nmsg.payload = { result: 'LEDs turned off' };\nnode.send([msg, {payload:'off'}]);\nreturn;",
        "outputs": 2,
        "x": 1240,
        "y": 1220,
        "wires": [
            [
                "275c4552aa1ace35"
            ],
            [
                "leds_ws_event"
            ]
        ]
    },
    {
        "id": "leds_http_blink",
        "type": "http in",
        "z": "7e0f78b972841d3a",
        "name": "",
        "url": "/leds/blink",
        "method": "post",
        "upload": false,
        "skipBodyParsing": false,
        "swaggerDoc": "",
        "x": 1000,
        "y": 1260,
        "wires": [
            [
                "leds_func_blink"
            ]
        ]
    },
    {
        "id": "leds_func_blink",
        "type": "function",
        "z": "7e0f78b972841d3a",
        "name": "Blink LEDs",
        "func": "flow.set('leds_status', 'blinking');\nmsg.payload = { result: 'LEDs are blinking' };\nnode.send([msg, {payload:'blinking'}]);\nreturn;",
        "outputs": 2,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1250,
        "y": 1260,
        "wires": [
            [
                "275c4552aa1ace35"
            ],
            [
                "leds_ws_event"
            ]
        ]
    },
    {
        "id": "leds_ws_event",
        "type": "websocket out",
        "z": "7e0f78b972841d3a",
        "name": "ledStateChanged event",
        "server": "leds_ws_server",
        "client": "",
        "x": 1550,
        "y": 1220,
        "wires": []
    },
    {
        "id": "9bbc9801e3348ec8",
        "type": "function",
        "z": "7e0f78b972841d3a",
        "name": "function 34",
        "func": "\nconst heaterTD = {\n    \"@context\": [\n        \"[http://www.w3.org/ns/td](http://www.w3.org/ns/td)\"\n    ],\n    \"@type\": [\n        \"Thing\"\n    ],\n    \"title\": \"Heater\",\n    \"securityDefinitions\": {\n        \"no_sec\": {\n            \"scheme\": \"nosec\"\n        }\n    },\n    \"security\": \"no_sec\",\n    \"properties\": {\n        \"temperature\": {\n            \"title\": \"Current temperature\",\n            \"description\": \"Shows the target temperature of the heater (Â°C)\",\n            \"type\": \"integer\",\n            \"readOnly\": true,\n            \"forms\": [\n                {\n                    \"href\": \"http://localhost:1880/things/heater/status\",\n                    \"contentType\": \"application/json\",\n                    \"op\": [\n                        \"readproperty\"\n                    ]\n                }\n            ]\n        },\n        \"timeHeating\": {\n            \"title\": \"Time heating\",\n            \"description\": \"Remaining heating time in minutes\",\n            \"type\": \"integer\",\n            \"readOnly\": true,\n            \"forms\": [\n                {\n                    \"href\": \"http://localhost:1880/things/heater/status\",\n                    \"contentType\": \"application/json\",\n                    \"op\": [\n                        \"readproperty\"\n                    ]\n                }\n            ]\n        },\n        \"status\": {\n            \"title\": \"Status\",\n            \"description\": \"Current heater status\",\n            \"type\": \"string\",\n            \"enum\": [\n                \"on\",\n                \"off\"\n            ],\n            \"readOnly\": true,\n            \"forms\": [\n                {\n                    \"href\": \"http://localhost:1880/things/heater/status\",\n                    \"contentType\": \"application/json\",\n                    \"op\": [\n                        \"readproperty\"\n                    ]\n                }\n            ]\n        }\n    },\n    \"actions\": {\n        \"startHeater\": {\n            \"title\": \"Start heater\",\n            \"description\": \"Starts the heater at the given temperature for the given time\",\n            \"input\": {\n                \"type\": \"object\",\n                \"properties\": {\n                    \"temperature\": {\n                        \"type\": \"integer\",\n                        \"description\": \"The temperature in degrees C\"\n                    },\n                    \"timeHeating\": {\n                        \"type\": \"integer\",\n                        \"description\": \"Minutes to keep heater on\"\n                    }\n                },\n                \"required\": [\n                    \"temperature\",\n                    \"timeHeating\"\n                ]\n            },\n            \"forms\": [\n                {\n                    \"href\": \"http://localhost:1880/things/heater/startHeater\",\n                    \"contentType\": \"application/json\",\n                    \"op\": [\n                        \"invokeaction\"\n                    ]\n                }\n            ]\n        },\n        \"stopHeater\": {\n            \"title\": \"Stop heater\",\n            \"description\": \"Stops the heater immediately\",\n            \"forms\": [\n                {\n                    \"href\": \"http://localhost:1880/things/heater/stopHeater\",\n                    \"contentType\": \"application/json\",\n                    \"op\": [\n                        \"invokeaction\"\n                    ]\n                }\n            ]\n        }\n    },\n    \"events\": {\n        \"heaterStopped\": {\n            \"title\": \"Heater stopped\",\n            \"description\": \"Raised when the heater stops (timeout or manual stop)\",\n            \"data\": {\n                \"type\": \"string\"\n            },\n            \"forms\": [\n                {\n                    \"href\": \"ws://localhost:1880/things/heater/heaterStopped\",\n                    \"subprotocol\": \"websocket\",\n                    \"contentType\": \"application/json\",\n                    \"op\": [\n                        \"subscribeevent\"\n                    ]\n                }\n            ]\n        }\n    }\n}\n\n\n\n\nflow.set(\"heaterTD\", heaterTD);\n\nmsg.payload = heaterTD\n\n\nmsg.headers = {\n    \"Content-Type\": \"application/td+json\"\n};\n\nreturn msg;\n",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1250,
        "y": 780,
        "wires": [
            [
                "243260ce44651b69"
            ]
        ]
    },
    {
        "id": "0308d90b5f2edb1d",
        "type": "function",
        "z": "7e0f78b972841d3a",
        "name": "function 33",
        "func": "\nconst ledsTD = {\n    \"@context\": [\n        \"[http://www.w3.org/ns/td](http://www.w3.org/ns/td)\"\n    ],\n    \"@type\": [\n        \"Thing\"\n    ],\n    \"title\": \"LEDs\",\n    \"securityDefinitions\": {\n        \"no_sec\": {\n            \"scheme\": \"nosec\"\n        }\n    },\n    \"security\": \"no_sec\",\n    \"properties\": {\n        \"status\": {\n            \"title\": \"LED Status\",\n            \"description\": \"Current state of the LEDs\",\n            \"type\": \"string\",\n            \"enum\": [\"on\", \"off\", \"blinking\"],\n            \"readOnly\": true,\n            \"forms\": [\n                {\n                    \"href\": \"http://localhost:1880/things/leds/status\",\n                    \"contentType\": \"application/json\",\n                    \"op\": [\"readproperty\"]\n                }\n            ]\n        }\n    },\n    \"actions\": {\n        \"blink\": {\n            \"title\": \"Blink LEDs\",\n            \"description\": \"Blinks the LEDs\",\n            \"forms\": [\n                {\n                    \"href\": \"http://localhost:1880/things/leds/blink\",\n                    \"contentType\": \"application/json\",\n                    \"op\": [\"invokeaction\"]\n                }\n            ]\n        },\n        \"LEDsOn\": {\n            \"title\": \"Turn LEDs on\",\n            \"description\": \"Turns on the LEDs\",\n            \"forms\": [\n                {\n                    \"href\": \"http://localhost:1880/things/leds/on\",\n                    \"contentType\": \"application/json\",\n                    \"op\": [\"invokeaction\"]\n                }\n            ]\n        },\n        \"LEDsOff\": {\n            \"title\": \"Turn LEDs off\",\n            \"description\": \"Turns off the LEDs\",\n            \"forms\": [\n                {\n                    \"href\": \"http://localhost:1880/things/leds/off\",\n                    \"contentType\": \"application/json\",\n                    \"op\": [\"invokeaction\"]\n                }\n            ]\n        }\n    },\n    \"events\": {\n        \"ledStateChanged\": {\n            \"title\": \"LED state changed\",\n            \"description\": \"Emitted when the LED status changes\",\n            \"data\": {\n                \"type\": \"string\"\n            },\n            \"forms\": [\n                {\n                    \"href\": \"ws://localhost:1880/things/leds/ledStateChanged\",\n                    \"subprotocol\": \"websocket\",\n                    \"contentType\": \"application/json\",\n                    \"op\": [\"subscribeevent\"]\n                }\n            ]\n        }\n    }\n}\n\n\n\n\n\nflow.set(\"ledsTD\", ledsTD);\n\nmsg.payload = ledsTD\n\n\nmsg.headers = {\n    \"Content-Type\": \"application/td+json\"\n};\n\nreturn msg;\n",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1250,
        "y": 1100,
        "wires": [
            [
                "275c4552aa1ace35"
            ]
        ]
    },
    {
        "id": "d7ce2041238cba7b",
        "type": "comment",
        "z": "7e0f78b972841d3a",
        "name": "Main Room LightðŸ®",
        "info": "",
        "x": 290,
        "y": 1140,
        "wires": []
    },
    {
        "id": "b4cfa409b44f5158",
        "type": "http in",
        "z": "7e0f78b972841d3a",
        "name": "",
        "url": "/mainroomlight",
        "method": "get",
        "upload": false,
        "skipBodyParsing": false,
        "swaggerDoc": "",
        "x": 110,
        "y": 1200,
        "wires": [
            [
                "ac8331939a955d42"
            ]
        ]
    },
    {
        "id": "ac8331939a955d42",
        "type": "function",
        "z": "7e0f78b972841d3a",
        "name": "function 32",
        "func": "\nconst mainRoomLight = {\n    \"@context\": [\n        \"[http://www.w3.org/ns/td](http://www.w3.org/ns/td)\"\n    ],\n    \"@type\": [\n        \"Thing\"\n    ],\n    \"title\": \"MainRoomLight\",\n    \"securityDefinitions\": {\n        \"no_sec\": {\n            \"scheme\": \"nosec\"\n        }\n    },\n    \"security\": \"no_sec\",\n    \"properties\": {\n        \"status\": {\n            \"title\": \"Light status\",\n            \"description\": \"Current state of the main room light\",\n            \"type\": \"string\",\n            \"enum\": [\"on\", \"off\"],\n            \"readOnly\": true,\n            \"forms\": [\n                {\n                    \"href\": \"http://localhost:1880/things/mainroomlight/status\",\n                    \"contentType\": \"application/json\",\n                    \"op\": [\"readproperty\"]\n                }\n            ]\n        }\n    },\n    \"actions\": {\n        \"lightOn\": {\n            \"title\": \"Turn light on\",\n            \"description\": \"Turns the light on\",\n            \"forms\": [\n                {\n                    \"href\": \"http://localhost:1880/things/mainroomlight/on\",\n                    \"contentType\": \"application/json\",\n                    \"op\": [\"invokeaction\"]\n                }\n            ]\n        },\n        \"lightOff\": {\n            \"title\": \"Turn light off\",\n            \"description\": \"Turns the light off\",\n            \"forms\": [\n                {\n                    \"href\": \"http://localhost:1880/things/mainroomlight/off\",\n                    \"contentType\": \"application/json\",\n                    \"op\": [\"invokeaction\"]\n                }\n            ]\n        }\n    },\n    \"events\": {\n        \"lightStateChanged\": {\n            \"title\": \"Light state changed\",\n            \"description\": \"Emitted whenever the main room light changes state\",\n            \"data\": {\n                \"type\": \"string\"\n            },\n            \"forms\": [\n                {\n                    \"href\": \"ws://localhost:1880/things/mainroomlight/lightStateChanged\",\n                    \"subprotocol\": \"websocket\",\n                    \"contentType\": \"application/json\",\n                    \"op\": [\"subscribeevent\"]\n                }\n            ]\n        }\n    }\n}\n\n\n\n\n\n\nflow.set(\"mainRoomLight\", mainRoomLight);\n\nmsg.payload = mainRoomLight\n\n\nmsg.headers = {\n    \"Content-Type\": \"application/td+json\"\n};\n\nreturn msg;\n",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 370,
        "y": 1200,
        "wires": [
            [
                "e0bac71316f1678e"
            ]
        ]
    },
    {
        "id": "e0bac71316f1678e",
        "type": "http response",
        "z": "7e0f78b972841d3a",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 590,
        "y": 1200,
        "wires": []
    },
    {
        "id": "mrl_http_status",
        "type": "http in",
        "z": "7e0f78b972841d3a",
        "name": "",
        "url": "/mainroomlight/status",
        "method": "get",
        "upload": false,
        "skipBodyParsing": false,
        "swaggerDoc": "",
        "x": 130,
        "y": 1260,
        "wires": [
            [
                "mrl_func_status"
            ]
        ]
    },
    {
        "id": "mrl_func_status",
        "type": "function",
        "z": "7e0f78b972841d3a",
        "name": "Get status",
        "func": "msg.payload = { status: flow.get('mrl_status') || 'off' };\nreturn msg;",
        "outputs": 1,
        "x": 370,
        "y": 1260,
        "wires": [
            [
                "e0bac71316f1678e"
            ]
        ]
    },
    {
        "id": "mrl_http_on",
        "type": "http in",
        "z": "7e0f78b972841d3a",
        "name": "",
        "url": "/mainroomlight/on",
        "method": "post",
        "upload": false,
        "skipBodyParsing": false,
        "swaggerDoc": "",
        "x": 120,
        "y": 1340,
        "wires": [
            [
                "mrl_func_on"
            ]
        ]
    },
    {
        "id": "mrl_func_on",
        "type": "function",
        "z": "7e0f78b972841d3a",
        "name": "Turn ON",
        "func": "flow.set('mrl_status', 'on');\nmsg.payload = { result: 'Main room light turned on' };\nnode.send([msg, {payload: 'on'}]);\nreturn;",
        "outputs": 2,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 360,
        "y": 1340,
        "wires": [
            [
                "e0bac71316f1678e"
            ],
            [
                "mrl_ws_event"
            ]
        ]
    },
    {
        "id": "mrl_http_off",
        "type": "http in",
        "z": "7e0f78b972841d3a",
        "name": "",
        "url": "/mainroomlight/off",
        "method": "post",
        "upload": false,
        "skipBodyParsing": false,
        "swaggerDoc": "",
        "x": 120,
        "y": 1420,
        "wires": [
            [
                "mrl_func_off"
            ]
        ]
    },
    {
        "id": "mrl_func_off",
        "type": "function",
        "z": "7e0f78b972841d3a",
        "name": "Turn OFF",
        "func": "flow.set('mrl_status', 'off');\nmsg.payload = { result: 'Main room light turned off' };\nnode.send([msg, {payload: 'off'}]);\nreturn;",
        "outputs": 2,
        "x": 360,
        "y": 1420,
        "wires": [
            [
                "e0bac71316f1678e"
            ],
            [
                "mrl_ws_event"
            ]
        ]
    },
    {
        "id": "mrl_ws_event",
        "type": "websocket out",
        "z": "7e0f78b972841d3a",
        "name": "lightStateChanged event",
        "server": "mrl_ws_server",
        "client": "",
        "x": 650,
        "y": 1360,
        "wires": []
    },
    {
        "id": "daa8773bee0aa4b8",
        "type": "comment",
        "z": "7e0f78b972841d3a",
        "name": "Motion Sensor ðŸƒâ€â™‚ï¸",
        "info": "",
        "x": 1190,
        "y": 1320,
        "wires": []
    },
    {
        "id": "a4f21a3fddc74c14",
        "type": "http in",
        "z": "7e0f78b972841d3a",
        "name": "",
        "url": "/motionsensor",
        "method": "get",
        "upload": false,
        "skipBodyParsing": false,
        "swaggerDoc": "",
        "x": 1010,
        "y": 1380,
        "wires": [
            [
                "983aba754cc04d05"
            ]
        ]
    },
    {
        "id": "983aba754cc04d05",
        "type": "function",
        "z": "7e0f78b972841d3a",
        "name": "function 35",
        "func": "\nconst motionSensor = {\n    \"@context\": [\n        \"[http://www.w3.org/ns/td](http://www.w3.org/ns/td)\"\n    ],\n    \"@type\": [\n        \"Thing\"\n    ],\n    \"title\": \"MotionSensor\",\n    \"securityDefinitions\": {\n        \"no_sec\": {\n            \"scheme\": \"nosec\"\n        }\n    },\n    \"security\": \"no_sec\",\n    \"properties\": {},\n    \"actions\": {},\n    \"events\": {\n        \"motionDetected\": {\n            \"title\": \"Motion detected\",\n            \"description\": \"An event emitted when motion is detected\",\n            \"data\": {\n                \"type\": \"string\",\n                \"description\": \"Timestamp when motion was detected\"\n            },\n            \"forms\": [\n                {\n                    \"href\": \"ws://localhost:1880/things/motionsensor/motiondetected\",\n                    \"subprotocol\": \"wot\",\n                    \"contentType\": \"application/json\",\n                    \"op\": [\n                        \"subscribeevent\",\n                        \"unsubscribeevent\"\n                    ]\n                }\n            ]\n        }\n    }\n}\n\n\n\n\n\n\nflow.set(\"motionSensor\", motionSensor);\n\nmsg.payload = motionSensor\n\n\nmsg.headers = {\n    \"Content-Type\": \"application/td+json\"\n};\n\nreturn msg;\n",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1250,
        "y": 1380,
        "wires": [
            [
                "e939c9b93b4fc4e9"
            ]
        ]
    },
    {
        "id": "e939c9b93b4fc4e9",
        "type": "http response",
        "z": "7e0f78b972841d3a",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 1490,
        "y": 1380,
        "wires": []
    },
    {
        "id": "ms_inject_motion",
        "type": "inject",
        "z": "7e0f78b972841d3a",
        "name": "Simulate motion",
        "props": [],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 1000,
        "y": 1440,
        "wires": [
            [
                "ms_func_motion"
            ]
        ]
    },
    {
        "id": "ms_func_motion",
        "type": "function",
        "z": "7e0f78b972841d3a",
        "name": "Generate event",
        "func": "let now = new Date().toISOString();\nmsg.payload = { \"event\": \"motionDetected\", \"time\": now };\nreturn msg;",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1280,
        "y": 1440,
        "wires": [
            [
                "ms_ws_motion"
            ]
        ]
    },
    {
        "id": "ms_ws_motion",
        "type": "websocket out",
        "z": "7e0f78b972841d3a",
        "name": "",
        "server": "ms_ws_server",
        "client": "",
        "x": 1560,
        "y": 1440,
        "wires": []
    },
    {
        "id": "36811e5482c2a320",
        "type": "comment",
        "z": "7e0f78b972841d3a",
        "name": "Smart Assistant ðŸ¤–",
        "info": "",
        "x": 1190,
        "y": 1500,
        "wires": []
    },
    {
        "id": "c3bf5be4af0a0aef",
        "type": "http in",
        "z": "7e0f78b972841d3a",
        "name": "",
        "url": "/smartassistant",
        "method": "get",
        "upload": false,
        "skipBodyParsing": false,
        "swaggerDoc": "",
        "x": 1010,
        "y": 1560,
        "wires": [
            [
                "c11051e1c8c3b9d5"
            ]
        ]
    },
    {
        "id": "c11051e1c8c3b9d5",
        "type": "function",
        "z": "7e0f78b972841d3a",
        "name": "function 36",
        "func": "\nconst smartAssistant = {\n    \"@context\": [\n        \"http://www.w3.org/ns/td\"\n    ],\n    \"@type\": [\n        \"Thing\"\n    ],\n    \"title\": \"SmartAssistant\",\n    \"securityDefinitions\": {\n        \"no_sec\": {\n            \"scheme\": \"nosec\"\n        }\n    },\n    \"security\": \"no_sec\",\n    \"actions\": {\n        \"say\": {\n            \"title\": \"Say phrase\",\n            \"description\": \"Makes the assistant say the given phrase\",\n            \"input\": {\n                \"type\": \"object\",\n                \"properties\": {\n                    \"phrase\": {\n                        \"type\": \"string\",\n                        \"description\": \"The phrase to be spoken by this assistant\"\n                    }\n                },\n                \"required\": [\"phrase\"]\n            },\n            \"forms\": [\n                {\n                    \"href\": \"http://localhost:1880/things/smartassistant/say\",\n                    \"contentType\": \"application/json\",\n                    \"op\": [\"invokeaction\"]\n                }\n            ]\n        }\n    },\n    \"properties\": {},\n    \"events\": {}\n}\n\n\n\n\n\n\n\nflow.set(\"smartAssistant\", smartAssistant);\n\nmsg.payload = smartAssistant\n\n\nmsg.headers = {\n    \"Content-Type\": \"application/td+json\"\n};\n\nreturn msg;\n",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1270,
        "y": 1560,
        "wires": [
            [
                "6b2c0c5eddf92660"
            ]
        ]
    },
    {
        "id": "6b2c0c5eddf92660",
        "type": "http response",
        "z": "7e0f78b972841d3a",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 1490,
        "y": 1580,
        "wires": []
    },
    {
        "id": "sa_http_say",
        "type": "http in",
        "z": "7e0f78b972841d3a",
        "name": "",
        "url": "/smartassistant/say",
        "method": "post",
        "upload": false,
        "skipBodyParsing": false,
        "swaggerDoc": "",
        "x": 1030,
        "y": 1620,
        "wires": [
            [
                "sa_func_say"
            ]
        ]
    },
    {
        "id": "sa_func_say",
        "type": "function",
        "z": "7e0f78b972841d3a",
        "name": "Handle phrase",
        "func": "let body = msg.payload;\n\nif(body && body.phrase){\n    node.status({fill:\"green\",shape:\"dot\",text:\"Saying: \" + body.phrase});\n    msg.payload = { \"result\": \"Assistant said: \" + body.phrase };\n} else {\n    msg.statusCode = 400;\n    msg.payload = { \"error\": \"Missing 'phrase' in body\" };\n}\nreturn msg;",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1280,
        "y": 1620,
        "wires": [
            [
                "6b2c0c5eddf92660"
            ]
        ]
    },
    {
        "id": "538907384348d888",
        "type": "comment",
        "z": "7e0f78b972841d3a",
        "name": "Speaker ðŸ”Š",
        "info": "",
        "x": 270,
        "y": 1480,
        "wires": []
    },
    {
        "id": "c411a6b92a5be8c4",
        "type": "http in",
        "z": "7e0f78b972841d3a",
        "name": "",
        "url": "/speaker",
        "method": "get",
        "upload": false,
        "skipBodyParsing": false,
        "swaggerDoc": "",
        "x": 90,
        "y": 1540,
        "wires": [
            [
                "d5ce126e1d9311d9"
            ]
        ]
    },
    {
        "id": "d5ce126e1d9311d9",
        "type": "function",
        "z": "7e0f78b972841d3a",
        "name": "function 37",
        "func": "\nconst speaker = {\n    \"@context\": [\n        \"http://www.w3.org/ns/td\"\n    ],\n    \"@type\": [\n        \"Thing\"\n    ],\n    \"title\": \"Speaker\",\n    \"securityDefinitions\": {\n        \"no_sec\": {\n            \"scheme\": \"nosec\"\n        }\n    },\n    \"security\": \"no_sec\",\n    \"properties\": {\n        \"volume\": {\n            \"title\": \"Volume\",\n            \"description\": \"The current volume percentage\",\n            \"type\": \"integer\",\n            \"forms\": [\n                {\n                    \"href\": \"http://localhost:1880/things/speaker/volume\",\n                    \"contentType\": \"application/json\",\n                    \"op\": [\"readproperty\"]\n                }\n            ]\n        }\n    },\n    \"actions\": {\n        \"setVolume\": {\n            \"title\": \"Set volume\",\n            \"description\": \"Sets the volume of this speaker\",\n            \"input\": {\n                \"type\": \"object\",\n                \"properties\": {\n                    \"percentage\": {\n                        \"type\": \"integer\",\n                        \"minimum\": 0,\n                        \"maximum\": 100,\n                        \"description\": \"The volume percentage (0â€“100)\"\n                    }\n                },\n                \"required\": [\"percentage\"]\n            },\n            \"forms\": [\n                {\n                    \"href\": \"http://localhost:1880/things/speaker/setVolume\",\n                    \"contentType\": \"application/json\",\n                    \"op\": [\"invokeaction\"]\n                }\n            ]\n        },\n        \"getVolume\": {\n            \"title\": \"Get volume\",\n            \"description\": \"Gets the current volume of this speaker\",\n            \"output\": {\n                \"type\": \"integer\"\n            },\n            \"forms\": [\n                {\n                    \"href\": \"http://localhost:1880/things/speaker/getVolume\",\n                    \"contentType\": \"application/json\",\n                    \"op\": [\"invokeaction\"]\n                }\n            ]\n        }\n    },\n    \"events\": {}\n}\n\n\n\n\n\n\n\nflow.set(\"speaker\", speaker);\n\nmsg.payload = speaker\n\n\nmsg.headers = {\n    \"Content-Type\": \"application/td+json\"\n};\n\nreturn msg;\n",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 410,
        "y": 1540,
        "wires": [
            [
                "18531c0c2853be4a"
            ]
        ]
    },
    {
        "id": "18531c0c2853be4a",
        "type": "http response",
        "z": "7e0f78b972841d3a",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 590,
        "y": 1600,
        "wires": []
    },
    {
        "id": "sp_http_setVolume",
        "type": "http in",
        "z": "7e0f78b972841d3a",
        "name": "",
        "url": "/speaker/setVolume",
        "method": "post",
        "upload": false,
        "skipBodyParsing": false,
        "swaggerDoc": "",
        "x": 130,
        "y": 1600,
        "wires": [
            [
                "sp_func_setVolume"
            ]
        ]
    },
    {
        "id": "sp_func_setVolume",
        "type": "function",
        "z": "7e0f78b972841d3a",
        "name": "Set volume",
        "func": "let body = msg.payload;\nif(body && body.percentage !== undefined){\n    let vol = parseInt(body.percentage);\n    if(vol < 0) vol = 0;\n    if(vol > 100) vol = 100;\n    flow.set(\"speaker_volume\", vol);\n    msg.payload = { \"result\": \"Volume set to \" + vol, \"volume\": vol };\n} else {\n    msg.statusCode = 400;\n    msg.payload = { \"error\": \"Missing 'percentage' in body\" };\n}\nreturn msg;",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 410,
        "y": 1600,
        "wires": [
            [
                "18531c0c2853be4a"
            ]
        ]
    },
    {
        "id": "sp_http_getVolume",
        "type": "http in",
        "z": "7e0f78b972841d3a",
        "name": "",
        "url": "/speaker/getVolume",
        "method": "get",
        "upload": false,
        "skipBodyParsing": false,
        "swaggerDoc": "",
        "x": 140,
        "y": 1660,
        "wires": [
            [
                "sp_func_getVolume"
            ]
        ]
    },
    {
        "id": "sp_func_getVolume",
        "type": "function",
        "z": "7e0f78b972841d3a",
        "name": "Get volume",
        "func": "let vol = flow.get(\"speaker_volume\") || 50; // default 50\nmsg.payload = { \"volume\": vol };\nreturn msg;",
        "outputs": 1,
        "x": 410,
        "y": 1660,
        "wires": [
            [
                "18531c0c2853be4a"
            ]
        ]
    },
    {
        "id": "sp_http_getVolume_property",
        "type": "http in",
        "z": "7e0f78b972841d3a",
        "name": "",
        "url": "/speaker/volume",
        "method": "get",
        "upload": false,
        "skipBodyParsing": false,
        "swaggerDoc": "",
        "x": 130,
        "y": 1720,
        "wires": [
            [
                "sp_func_getVolume"
            ]
        ]
    },
    {
        "id": "5464a89eb7ef0bda",
        "type": "http request",
        "z": "7e0f78b972841d3a",
        "name": "",
        "method": "GET",
        "ret": "obj",
        "paytoqs": "ignore",
        "url": "http://localhost:8080/washingmachine/status",
        "tls": "",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [],
        "x": 390,
        "y": 620,
        "wires": [
            [
                "cf86740517719117"
            ]
        ]
    },
    {
        "id": "11eb8ebcf326cd85",
        "type": "inject",
        "z": "7e0f78b972841d3a",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 100,
        "y": 620,
        "wires": [
            [
                "5464a89eb7ef0bda"
            ]
        ]
    },
    {
        "id": "b7614e84e21bc41c",
        "type": "websocket out",
        "z": "7e0f78b972841d3a",
        "name": "",
        "server": "459ec480e7d4d173",
        "client": "",
        "x": 640,
        "y": 680,
        "wires": []
    },
    {
        "id": "0916e7905bc65d3d",
        "type": "websocket out",
        "z": "7e0f78b972841d3a",
        "name": "",
        "server": "b929aa6c1471be56",
        "client": "",
        "x": 1490,
        "y": 680,
        "wires": []
    },
    {
        "id": "97bff8a797d86ca6",
        "type": "http in",
        "z": "7e0f78b972841d3a",
        "name": "",
        "url": "/thingdirectory",
        "method": "get",
        "upload": false,
        "skipBodyParsing": false,
        "swaggerDoc": "",
        "x": 690,
        "y": 80,
        "wires": [
            [
                "1633611de13d3f15"
            ]
        ]
    },
    {
        "id": "1633611de13d3f15",
        "type": "function",
        "z": "7e0f78b972841d3a",
        "name": "function 39",
        "func": "\nconst thingDirectory = \n\n[\n    {\n        \"@context\": \"http://www.w3.org/ns/td\",\n        \"@type\": [\n            \"Thing\"\n        ],\n        \"title\": \"WashingMachine\",\n        \"securityDefinitions\": {\n            \"no_sec\": {\n                \"scheme\": \"nosec\"\n            }\n        },\n        \"security\": \"no_sec\",\n        \"properties\": {\n            \"status\": {\n                \"title\": \"Machine Status\",\n                \"description\": \"Current state of the washing machine\",\n                \"type\": \"string\",\n                \"enum\": [\n                    \"idle\",\n                    \"running\",\n                    \"finished\"\n                ],\n                \"readOnly\": true,\n                \"forms\": [\n                    {\n                        \"href\": \"http://localhost:8080/things/wm/status\",\n                        \"contentType\": \"application/json\",\n                        \"op\": [\n                            \"readproperty\"\n                        ]\n                    }\n                ]\n            },\n            \"remainingTime\": {\n                \"title\": \"Time Left\",\n                \"description\": \"Remaining wash cycle time in minutes\",\n                \"type\": \"integer\",\n                \"unit\": \"minutes\",\n                \"readOnly\": true,\n                \"forms\": [\n                    {\n                        \"href\": \"http://localhost:8080/things/wm/remainingTime\",\n                        \"contentType\": \"application/json\",\n                        \"op\": [\n                            \"readproperty\"\n                        ]\n                    }\n                ]\n            }\n        },\n        \"actions\": {\n            \"start\": {\n                \"title\": \"Start Washing Cycle\",\n                \"description\": \"Start a new wash program\",\n                \"input\": {\n                    \"type\": \"string\",\n                    \"enum\": [\n                        \"quick\",\n                        \"cotton\",\n                        \"wool\"\n                    ]\n                },\n                \"forms\": [\n                    {\n                        \"href\": \"http://localhost:8080/things/wm/start\",\n                        \"contentType\": \"application/json\",\n                        \"op\": [\n                            \"invokeaction\"\n                        ]\n                    }\n                ]\n            },\n            \"stop\": {\n                \"title\": \"Stop Cycle\",\n                \"description\": \"Immediately stop the wash program\",\n                \"forms\": [\n                    {\n                        \"href\": \"http://localhost:8080/things/wm/stop\",\n                        \"contentType\": \"application/json\",\n                        \"op\": [\n                            \"invokeaction\"\n                        ]\n                    }\n                ]\n            }\n        },\n        \"events\": {\n            \"finishedCycle\": {\n                \"title\": \"Wash cycle complete\",\n                \"description\": \"Sends a notification at the end of a wash cycle\",\n                \"data\": {\n                    \"type\": \"string\"\n                },\n                \"forms\": [\n                    {\n                        \"href\": \"ws://localhost:8080/things/wm/finishedCycle\",\n                        \"subprotocol\": \"websocket\",\n                        \"contentType\": \"application/json\",\n                        \"op\": [\n                            \"subscribeevent\"\n                        ]\n                    },\n                    {\n                        \"href\": \"http://localhost:8080/things/wm/finishedCycle\",\n                        \"subprotocol\": \"longpoll\"\n                    }\n                ]\n            }\n        }\n    },\n    {\n        \"@context\": [\n            \"http://www.w3.org/ns/td\"\n        ],\n        \"@type\": [\n            \"Thing\"\n        ],\n        \"title\": \"DoorBell\",\n        \"securityDefinitions\": {\n            \"no_sec\": {\n                \"scheme\": \"nosec\"\n            }\n        },\n        \"security\": \"no_sec\",\n        \"properties\": {\n            \"enabled\": {\n                \"title\": \"Enabled\",\n                \"description\": \"Whether the doorbell is active\",\n                \"type\": \"boolean\",\n                \"readOnly\": false,\n                \"forms\": [\n                    {\n                        \"href\": \"http://localhost:8080/doorbell/enabled\",\n                        \"contentType\": \"application/json\",\n                        \"op\": [\n                            \"readproperty\",\n                            \"writeproperty\"\n                        ]\n                    }\n                ]\n            },\n            \"lastRung\": {\n                \"title\": \"Last Rung\",\n                \"description\": \"Timestamp of the last ring\",\n                \"type\": \"string\",\n                \"readOnly\": true,\n                \"forms\": [\n                    {\n                        \"href\": \"http://localhost:8080/doorbell/lastRung\",\n                        \"contentType\": \"application/json\",\n                        \"op\": [\n                            \"readproperty\"\n                        ]\n                    }\n                ]\n            }\n        },\n        \"actions\": {\n            \"toggle\": {\n                \"title\": \"Enable/Disable Doorbell\",\n                \"description\": \"Invert the current enabled state\",\n                \"forms\": [\n                    {\n                        \"href\": \"http://localhost:8080/doorbell/toggle\",\n                        \"contentType\": \"application/json\",\n                        \"op\": [\n                            \"invokeaction\"\n                        ]\n                    }\n                ]\n            },\n            \"ring\": {\n                \"title\": \"Ring Doorbell\",\n                \"description\": \"Manually trigger the bell\",\n                \"forms\": [\n                    {\n                        \"href\": \"http://localhost:8080/doorbell/ring\",\n                        \"contentType\": \"application/json\",\n                        \"op\": [\n                            \"invokeaction\"\n                        ]\n                    }\n                ]\n            }\n        },\n        \"events\": {\n            \"bellRung\": {\n                \"title\": \"Bell rung\",\n                \"description\": \"The bell was rung\",\n                \"data\": {\n                    \"type\": \"string\"\n                },\n                \"forms\": [\n                    {\n                        \"href\": \"http://localhost:8080/doorbell/bellRung\",\n                        \"subprotocol\": \"longpoll\"\n                    }\n                ]\n            }\n        }\n    },\n    {\n        \"@context\": [\n            \"[http://www.w3.org/ns/td](http://www.w3.org/ns/td)\"\n        ],\n        \"@type\": [\n            \"Thing\"\n        ],\n        \"title\": \"MainRoomLight\",\n        \"securityDefinitions\": {\n            \"no_sec\": {\n                \"scheme\": \"nosec\"\n            }\n        },\n        \"security\": \"no_sec\",\n        \"properties\": {\n            \"status\": {\n                \"title\": \"Light status\",\n                \"description\": \"Current state of the main room light\",\n                \"type\": \"string\",\n                \"enum\": [\n                    \"on\",\n                    \"off\"\n                ],\n                \"readOnly\": true,\n                \"forms\": [\n                    {\n                        \"href\": \"http://localhost:8080/things/mainroomlight/status\",\n                        \"contentType\": \"application/json\",\n                        \"op\": [\n                            \"readproperty\"\n                        ]\n                    }\n                ]\n            }\n        },\n        \"actions\": {\n            \"lightOn\": {\n                \"title\": \"Turn light on\",\n                \"description\": \"Turns the light on\",\n                \"forms\": [\n                    {\n                        \"href\": \"http://localhost:8080/things/mainroomlight/on\",\n                        \"contentType\": \"application/json\",\n                        \"op\": [\n                            \"invokeaction\"\n                        ]\n                    }\n                ]\n            },\n            \"lightOff\": {\n                \"title\": \"Turn light off\",\n                \"description\": \"Turns the light off\",\n                \"forms\": [\n                    {\n                        \"href\": \"http://localhost:8080/things/mainroomlight/off\",\n                        \"contentType\": \"application/json\",\n                        \"op\": [\n                            \"invokeaction\"\n                        ]\n                    }\n                ]\n            }\n        },\n        \"events\": {\n            \"lightStateChanged\": {\n                \"title\": \"Light state changed\",\n                \"description\": \"Emitted whenever the main room light changes state\",\n                \"data\": {\n                    \"type\": \"string\"\n                },\n                \"forms\": [\n                    {\n                        \"href\": \"ws://localhost:8080/things/mainroomlight/lightStateChanged\",\n                        \"subprotocol\": \"websocket\",\n                        \"contentType\": \"application/json\",\n                        \"op\": [\n                            \"subscribeevent\"\n                        ]\n                    }\n                ]\n            }\n        }\n    },\n    {\n        \"@context\": [\n            \"http://www.w3.org/ns/td\"\n        ],\n        \"@type\": [\n            \"Thing\"\n        ],\n        \"title\": \"Speaker\",\n        \"securityDefinitions\": {\n            \"no_sec\": {\n                \"scheme\": \"nosec\"\n            }\n        },\n        \"security\": \"no_sec\",\n        \"properties\": {\n            \"volume\": {\n                \"title\": \"Volume\",\n                \"description\": \"The current volume percentage\",\n                \"type\": \"integer\",\n                \"forms\": [\n                    {\n                        \"href\": \"http://localhost:8080/things/speaker/volume\",\n                        \"contentType\": \"application/json\",\n                        \"op\": [\n                            \"readproperty\"\n                        ]\n                    }\n                ]\n            }\n        },\n        \"actions\": {\n            \"setVolume\": {\n                \"title\": \"Set volume\",\n                \"description\": \"Sets the volume of this speaker\",\n                \"input\": {\n                    \"type\": \"object\",\n                    \"properties\": {\n                        \"percentage\": {\n                            \"type\": \"integer\",\n                            \"minimum\": 0,\n                            \"maximum\": 100,\n                            \"description\": \"The volume percentage (0â€“100)\"\n                        }\n                    },\n                    \"required\": [\n                        \"percentage\"\n                    ]\n                },\n                \"forms\": [\n                    {\n                        \"href\": \"http://localhost:8080/things/speaker/setVolume\",\n                        \"contentType\": \"application/json\",\n                        \"op\": [\n                            \"invokeaction\"\n                        ]\n                    }\n                ]\n            },\n            \"getVolume\": {\n                \"title\": \"Get volume\",\n                \"description\": \"Gets the current volume of this speaker\",\n                \"output\": {\n                    \"type\": \"integer\"\n                },\n                \"forms\": [\n                    {\n                        \"href\": \"http://localhost:8080/things/speaker/getVolume\",\n                        \"contentType\": \"application/json\",\n                        \"op\": [\n                            \"invokeaction\"\n                        ]\n                    }\n                ]\n            }\n        },\n        \"events\": {}\n    },\n    {\n        \"@context\": [\n            \"[http://www.w3.org/ns/td](http://www.w3.org/ns/td)\"\n        ],\n        \"@type\": [\n            \"Thing\"\n        ],\n        \"title\": \"Alarm\",\n        \"securityDefinitions\": {\n            \"no_sec\": {\n                \"scheme\": \"nosec\"\n            }\n        },\n        \"security\": \"no_sec\",\n        \"properties\": {\n            \"time\": {\n                \"title\": \"Alarm Time\",\n                \"description\": \"The scheduled alarm time in HH:MM format\",\n                \"type\": \"string\",\n                \"readOnly\": false,\n                \"forms\": [\n                    {\n                        \"href\": \"http://localhost:8080/alarm/time\",\n                        \"contentType\": \"application/json\",\n                        \"op\": [\n                            \"readproperty\",\n                            \"writeproperty\"\n                        ]\n                    }\n                ]\n            },\n            \"enabled\": {\n                \"title\": \"Enabled\",\n                \"description\": \"Whether the alarm is active\",\n                \"type\": \"boolean\",\n                \"readOnly\": false,\n                \"forms\": [\n                    {\n                        \"href\": \"http://localhost:8080/alarm/enabled\",\n                        \"contentType\": \"application/json\",\n                        \"op\": [\n                            \"readproperty\",\n                            \"writeproperty\"\n                        ]\n                    }\n                ]\n            }\n        },\n        \"actions\": {\n            \"setTime\": {\n                \"title\": \"Set Alarm Time\",\n                \"input\": {\n                    \"type\": \"string\",\n                    \"pattern\": \"^([01]?[0-9]|2[0-3]):[0-5][0-9]$\"\n                },\n                \"forms\": [\n                    {\n                        \"href\": \"http://localhost:8080/alarm/setTime\",\n                        \"contentType\": \"application/json\",\n                        \"op\": [\n                            \"invokeaction\"\n                        ]\n                    }\n                ]\n            },\n            \"toggle\": {\n                \"title\": \"Enable/Disable Alarm\",\n                \"input\": {\n                    \"type\": \"boolean\"\n                },\n                \"forms\": [\n                    {\n                        \"href\": \"http://localhost:8080/alarm/toggle\",\n                        \"contentType\": \"application/json\",\n                        \"op\": [\n                            \"invokeaction\"\n                        ]\n                    }\n                ]\n            },\n            \"stop\": {\n                \"title\": \"Stop Alarm\",\n                \"description\": \"Stops the ringing alarm\",\n                \"forms\": [\n                    {\n                        \"href\": \"http://localhost:8080/alarm/stop\",\n                        \"contentType\": \"application/json\",\n                        \"op\": [\n                            \"invokeaction\"\n                        ]\n                    }\n                ]\n            }\n        },\n        \"events\": {\n            \"alarmRinging\": {\n                \"title\": \"Alarm Ringing\",\n                \"description\": \"This alarm has started ringing\",\n                \"data\": {\n                    \"type\": \"string\"\n                },\n                \"forms\": [\n                    {\n                        \"href\": \"http://localhost:8080/alarm/ringing\",\n                        \"subprotocol\": \"longpoll\"\n                    }\n                ]\n            }\n        }\n    },\n    {\n        \"@context\": [\n            \"[http://www.w3.org/ns/td](http://www.w3.org/ns/td)\"\n        ],\n        \"@type\": [\n            \"Thing\"\n        ],\n        \"title\": \"Heater\",\n        \"securityDefinitions\": {\n            \"no_sec\": {\n                \"scheme\": \"nosec\"\n            }\n        },\n        \"security\": \"no_sec\",\n        \"properties\": {\n            \"temperature\": {\n                \"title\": \"Current temperature\",\n                \"description\": \"Shows the target temperature of the heater (Â°C)\",\n                \"type\": \"integer\",\n                \"readOnly\": true,\n                \"forms\": [\n                    {\n                        \"href\": \"http://localhost:8080/things/heater/status\",\n                        \"contentType\": \"application/json\",\n                        \"op\": [\n                            \"readproperty\"\n                        ]\n                    }\n                ]\n            },\n            \"timeHeating\": {\n                \"title\": \"Time heating\",\n                \"description\": \"Remaining heating time in minutes\",\n                \"type\": \"integer\",\n                \"readOnly\": true,\n                \"forms\": [\n                    {\n                        \"href\": \"http://localhost:8080/things/heater/status\",\n                        \"contentType\": \"application/json\",\n                        \"op\": [\n                            \"readproperty\"\n                        ]\n                    }\n                ]\n            },\n            \"status\": {\n                \"title\": \"Status\",\n                \"description\": \"Current heater status\",\n                \"type\": \"string\",\n                \"enum\": [\n                    \"on\",\n                    \"off\"\n                ],\n                \"readOnly\": true,\n                \"forms\": [\n                    {\n                        \"href\": \"http://localhost:8080/things/heater/status\",\n                        \"contentType\": \"application/json\",\n                        \"op\": [\n                            \"readproperty\"\n                        ]\n                    }\n                ]\n            }\n        },\n        \"actions\": {\n            \"startHeater\": {\n                \"title\": \"Start heater\",\n                \"description\": \"Starts the heater at the given temperature for the given time\",\n                \"input\": {\n                    \"type\": \"object\",\n                    \"properties\": {\n                        \"temperature\": {\n                            \"type\": \"integer\",\n                            \"description\": \"The temperature in degrees C\"\n                        },\n                        \"timeHeating\": {\n                            \"type\": \"integer\",\n                            \"description\": \"Minutes to keep heater on\"\n                        }\n                    },\n                    \"required\": [\n                        \"temperature\",\n                        \"timeHeating\"\n                    ]\n                },\n                \"forms\": [\n                    {\n                        \"href\": \"http://localhost:8080/things/heater/startHeater\",\n                        \"contentType\": \"application/json\",\n                        \"op\": [\n                            \"invokeaction\"\n                        ]\n                    }\n                ]\n            },\n            \"stopHeater\": {\n                \"title\": \"Stop heater\",\n                \"description\": \"Stops the heater immediately\",\n                \"forms\": [\n                    {\n                        \"href\": \"http://localhost:8080/things/heater/stopHeater\",\n                        \"contentType\": \"application/json\",\n                        \"op\": [\n                            \"invokeaction\"\n                        ]\n                    }\n                ]\n            }\n        },\n        \"events\": {\n            \"heaterStopped\": {\n                \"title\": \"Heater stopped\",\n                \"description\": \"Raised when the heater stops (timeout or manual stop)\",\n                \"data\": {\n                    \"type\": \"string\"\n                },\n                \"forms\": [\n                    {\n                        \"href\": \"ws://localhost:8080/things/heater/heaterStopped\",\n                        \"subprotocol\": \"websocket\",\n                        \"contentType\": \"application/json\",\n                        \"op\": [\n                            \"subscribeevent\"\n                        ]\n                    }\n                ]\n            }\n        }\n    },\n    {\n        \"@context\": [\n            \"[http://www.w3.org/ns/td](http://www.w3.org/ns/td)\"\n        ],\n        \"@type\": [\n            \"Thing\"\n        ],\n        \"title\": \"LEDs\",\n        \"securityDefinitions\": {\n            \"no_sec\": {\n                \"scheme\": \"nosec\"\n            }\n        },\n        \"security\": \"no_sec\",\n        \"properties\": {\n            \"status\": {\n                \"title\": \"LED Status\",\n                \"description\": \"Current state of the LEDs\",\n                \"type\": \"string\",\n                \"enum\": [\n                    \"on\",\n                    \"off\",\n                    \"blinking\"\n                ],\n                \"readOnly\": true,\n                \"forms\": [\n                    {\n                        \"href\": \"http://localhost:8080/things/leds/status\",\n                        \"contentType\": \"application/json\",\n                        \"op\": [\n                            \"readproperty\"\n                        ]\n                    }\n                ]\n            }\n        },\n        \"actions\": {\n            \"blink\": {\n                \"title\": \"Blink LEDs\",\n                \"description\": \"Blinks the LEDs\",\n                \"forms\": [\n                    {\n                        \"href\": \"http://localhost:8080/things/leds/blink\",\n                        \"contentType\": \"application/json\",\n                        \"op\": [\n                            \"invokeaction\"\n                        ]\n                    }\n                ]\n            },\n            \"LEDsOn\": {\n                \"title\": \"Turn LEDs on\",\n                \"description\": \"Turns on the LEDs\",\n                \"forms\": [\n                    {\n                        \"href\": \"http://localhost:8080/things/leds/on\",\n                        \"contentType\": \"application/json\",\n                        \"op\": [\n                            \"invokeaction\"\n                        ]\n                    }\n                ]\n            },\n            \"LEDsOff\": {\n                \"title\": \"Turn LEDs off\",\n                \"description\": \"Turns off the LEDs\",\n                \"forms\": [\n                    {\n                        \"href\": \"http://localhost:8080/things/leds/off\",\n                        \"contentType\": \"application/json\",\n                        \"op\": [\n                            \"invokeaction\"\n                        ]\n                    }\n                ]\n            }\n        },\n        \"events\": {\n            \"ledStateChanged\": {\n                \"title\": \"LED state changed\",\n                \"description\": \"Emitted when the LED status changes\",\n                \"data\": {\n                    \"type\": \"string\"\n                },\n                \"forms\": [\n                    {\n                        \"href\": \"ws://localhost:8080/things/leds/ledStateChanged\",\n                        \"subprotocol\": \"websocket\",\n                        \"contentType\": \"application/json\",\n                        \"op\": [\n                            \"subscribeevent\"\n                        ]\n                    }\n                ]\n            }\n        }\n    },\n    {\n        \"@context\": [\n            \"[http://www.w3.org/ns/td](http://www.w3.org/ns/td)\"\n        ],\n        \"@type\": [\n            \"Thing\"\n        ],\n        \"title\": \"MotionSensor\",\n        \"securityDefinitions\": {\n            \"no_sec\": {\n                \"scheme\": \"nosec\"\n            }\n        },\n        \"security\": \"no_sec\",\n        \"properties\": {},\n        \"actions\": {},\n        \"events\": {\n            \"motionDetected\": {\n                \"title\": \"Motion detected\",\n                \"description\": \"An event emitted when motion is detected\",\n                \"data\": {\n                    \"type\": \"string\",\n                    \"description\": \"Timestamp when motion was detected\"\n                },\n                \"forms\": [\n                    {\n                        \"href\": \"ws://localhost:8080/things/motionsensor/motiondetected\",\n                        \"subprotocol\": \"wot\",\n                        \"contentType\": \"application/json\",\n                        \"op\": [\n                            \"subscribeevent\",\n                            \"unsubscribeevent\"\n                        ]\n                    }\n                ]\n            }\n        }\n    },\n    {\n        \"@context\": [\n            \"http://www.w3.org/ns/td\"\n        ],\n        \"@type\": [\n            \"Thing\"\n        ],\n        \"title\": \"SmartAssistant\",\n        \"securityDefinitions\": {\n            \"no_sec\": {\n                \"scheme\": \"nosec\"\n            }\n        },\n        \"security\": \"no_sec\",\n        \"actions\": {\n            \"say\": {\n                \"title\": \"Say phrase\",\n                \"description\": \"Makes the assistant say the given phrase\",\n                \"input\": {\n                    \"type\": \"object\",\n                    \"properties\": {\n                        \"phrase\": {\n                            \"type\": \"string\",\n                            \"description\": \"The phrase to be spoken by this assistant\"\n                        }\n                    },\n                    \"required\": [\n                        \"phrase\"\n                    ]\n                },\n                \"forms\": [\n                    {\n                        \"href\": \"http://localhost:8080/things/smartassistant/say\",\n                        \"contentType\": \"application/json\",\n                        \"op\": [\n                            \"invokeaction\"\n                        ]\n                    }\n                ]\n            }\n        },\n        \"properties\": {},\n        \"events\": {}\n    }\n]\n\n\n\n\n\n\n\nflow.set(\"thingDirectory\", thingDirectory);\n\nmsg.payload = thingDirectory\n\n\nmsg.headers = {\n    \"Content-Type\": \"application/td+json\"\n};\n\nreturn msg;\n",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 910,
        "y": 80,
        "wires": [
            [
                "db1fae22a264608c",
                "7395c9c5c90c323d"
            ]
        ]
    },
    {
        "id": "db1fae22a264608c",
        "type": "http response",
        "z": "7e0f78b972841d3a",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 1090,
        "y": 80,
        "wires": []
    },
    {
        "id": "7395c9c5c90c323d",
        "type": "debug",
        "z": "7e0f78b972841d3a",
        "name": "debug 29",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 1100,
        "y": 120,
        "wires": []
    },
    {
        "id": "3373b7e3eaad3463",
        "type": "websocket-listener",
        "path": "/doorbell/bellRung",
        "wholemsg": "false"
    },
    {
        "id": "heater_ws_server",
        "type": "websocket-listener",
        "path": "/things/heater/heaterStopped",
        "wholemsg": "false"
    },
    {
        "id": "leds_ws_server",
        "type": "websocket-listener",
        "path": "/things/leds/ledStateChanged",
        "wholemsg": "false"
    },
    {
        "id": "mrl_ws_server",
        "type": "websocket-listener",
        "path": "/things/mainroomlight/lightStateChanged",
        "wholemsg": "false"
    },
    {
        "id": "ms_ws_server",
        "type": "websocket-listener",
        "path": "/things/motionsensor/motiondetected",
        "wholemsg": "false"
    },
    {
        "id": "459ec480e7d4d173",
        "type": "websocket-listener",
        "path": "/things/wm/finishedCycle",
        "wholemsg": "false"
    },
    {
        "id": "b929aa6c1471be56",
        "type": "websocket-listener",
        "path": "/alarm/ringing",
        "wholemsg": "false"
    }
]